<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Buscar Cliente</title>
</head>
<body>
    <h1>Busca de Clientes</h1>

    <input type="text" id="nomeCliente" placeholder="Digite o nome completo">
    <button id="buscarCliente">Buscar</button>

    <div id="clienteInfo"></div>

    <script>
        let cliente = null;

        document.getElementById("buscarCliente").addEventListener("click", async () => {
            const nome = document.getElementById("nomeCliente").value.trim();
            if (!nome) return alert("Digite o nome do cliente");

            try {
                const res = await fetch(`http://localhost:3000/clientes/${encodeURIComponent(nome)}`);
                if (!res.ok) throw new Error("Cliente não encontrado");
                const data = await res.json();

                cliente = data;

                const infoDiv = document.getElementById("clienteInfo");
                infoDiv.innerHTML = `
                    <p><b>Cliente:</b> ${cliente["Nome Completo do Requerente"]}</p>
                    <p><b>E-mail:</b> ${cliente["E-mail do Requerente"]}</p>
                    <p><b>Endereço:</b> ${cliente["Endereço Completo"]}, ${cliente["Cidade"]}, ${cliente["Estado"]}, CEP: ${cliente["CEP"]}</p>
                `;
            } catch(err) {
                alert(err.message);
                cliente = null;
                document.getElementById("clienteInfo").innerHTML = "";
            }
        });
    </script>
</body>
</html>
